'use strict';
var resources = [
    'Context',
    'ExportConfig',
    'MessageDebug',
    'MessageHistory',
    'MessageIngress',
    'MessageStream',
    'Metadata',
    'RequestHistory',
    'TelemetryConfig',
    'AgentEmbedded',
    'HudEmbedded',
    'ClientEmbedded'
];
var ResourceRuntime = (function () {
    function ResourceRuntime(server) {
        this.server = server;
    }
    ResourceRuntime.prototype.register = function () {
        for (var i = 0; i < resources.length; i++) {
            var resourceModule = require('./' + resources[i] + 'Resource');
            var resourceFactory = resourceModule.Resource;
            var resource = new resourceFactory(this.server);
            this.server.providers.resourceManager.register(resource);
        }
    };
    ResourceRuntime.prototype.processRequest = function (req, res, next) {
        var result = this.server.providers.resourceManager.match(req);
        if (result) {
            // TODO: need to authorize the request using req and result.type (see #81)
            //if (true) {
            result.resource.invoke(req, res, next, result.parameters);
        }
    };
    return ResourceRuntime;
}());
exports.ResourceRuntime = ResourceRuntime;

//# sourceMappingURL=../../maps/resources/ResourceRuntime.js.map
